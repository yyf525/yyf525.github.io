# 基本模型

### 例题：
$\texttt{I.}$ 长度为 $2\cdot n$的括号序列个数

$\texttt{II.}$ 有一些元素和一个栈，每次操作可以将一个元素入栈或弹出栈顶元素，问合法操作序列数

$\texttt{III.}$ 有多少种不同的二叉树

$\texttt{IV.}$ 在网格图中，从( $0$, $0$ )走到( $n$, $n$ )并只能在对角线右下方走的方案数（可以经过，但不能越过）。

### 推导：
#### $\texttt{I.}$

设长度为 $2\cdot x$ 的括号序列有 $f(x)$ 个。我们设第 $1$ 个左括号和第 $i$ 个有括号相匹配，则这对括号里面有 $2\cdot (i-1)$ 个括号序列，方法数为 $f(i-1)$；右端还有长度为 $2(n-i)$的括号序列，他们相互独立。
故方案数 $\color{red}{f(n)=\sum^n_{i=1}f(i-1)\cdot f(n-i)}=\sum^{n-1}_{i=0}f(i)\cdot f(n-i-1)$，

且 $\color{red}{f(0)=1}$，$\color{red}{f(1)=1}$。

#### $\texttt{II.}$

将入栈看成左括号，将出战看成右括号，即转换为上一个问题。

#### $\texttt{III.}$

我们考虑左子树的大小，即可得出公式：$\color{red}{f(n)=\sum_{0}^{n-1}f(i)\cdot f(n-i-1)}$ 。

#### $\texttt{IV.}$

我们知道，从( $0$, $0$ )到( $n$, $n$ )有 $C_{2\cdot n}^{n}$，但期中包含了越过对角线的情况。

我们考虑一种越过对角线的路径，它一定有一个时刻 $\color{red}{y=x+1}$，我们将这条路径与直线 $y=x+1$ 对称，则它会走到( $n-1$, $n+1$ )，因为( $n-1$, $n+1$ )和( $n$,$n$ )在关于直线 $y=x+1$对称。则它的方法数为 $C_{2\cdot n}^{n-1}$。

故答案为 $f(n)=C_{2\cdot n}^{n}-C_{2\cdot n}^{n-1}$。

# 公式推导

$h_n=C_{2\cdot n}^{n}-C_{2\cdot n}^{n-1}$

且 $\displaystyle h_n=\frac{(2n)!}{n!\cdot n!}-\frac{(2n)!}{(n-1)!\cdot(n+1)!}$=$\frac{n+1}{n}\cdot C_{2\cdot n}^{n-1}-C_{2\cdot n}^{n-1}=\frac{C_{2\cdot n}^{n-1}}{n}=\frac{C_{2\cdot n}^{n-1}}{n+1}$

根据通项公式，还可得出 $h_n=\frac{4n-2}{n+1}\cdot h_{n-1}$

# 例题

### $\texttt{I.}$
##### 题目：
从数轴上原点出发走 $2\cdot n$ 步，其中向右 $n$ 步，向左 $n$ 步，问不到达负半轴的方案数。

##### 解法：
若达到了负半轴，则说明到达了 $-1$。

把第一次到达 $-1$ 之后的操作全部取反，那么每个不合法路径都会对应到从 $0$ 到 $-2$ 的一条路径

每个 $0$ 到 $-2$ 的路径也会和每个不合法路径一一对应，因为从 $0$ 走到 $-2$ 必然会经过 $-1$。

从 $0$ 走到 $-2$ 的路径中，向右走了 $n-1$ 步，向左走了 $n+1$ 步

故答案为 $\color{red}{C_{2\cdot n}^{n}-C_{2\cdot n}^{n-1}}$。

### $\texttt{II.}$
##### 题目：
瓶子里有 $n$ 片药，每天会执行以下两种操作之一：

$1.$ 取出一片药，掰成两半后吃掉其中一半并将另一半放回;

$2.$ 取出半片药并吃掉

问吃完整瓶药的不同操作序列数， $n\le 30$。

##### 解法：

第一种操作会使半片药的数量 $+1$，第二种操作会使半片药的数量 $-1$，且任何时候半片药的数量都为非负数。

这样即可转换为第 $\texttt{I}$ 题。

### $\texttt{III.}$
##### 题目：
有 $2\cdot n$ 个人，身高互不相同，需要将他们排成 $2$ 排，要求：

$\texttt{1}$ ：每一排都是升序排列。

$\texttt{2}$ ：每一列对应的位置一定是第二排的人更高。

求排列的方案数。

##### 解法：

我们现将 $2\cdot n$ 个人按身高从小到大排序，然后依次放进第 $1$ 或第 $2$ 排。

则我们可以知道任何时刻，第一排的人数都是大于第二排的人数。因为我们按身高将人排序，则后面的人一定比前面的人高（身高互不相等）。

反证法：

不妨设当前第二排有 $x$ 个人。则当第一排的第 $x$ 个人被填好时，他的身高一定会比第二排的第 $x$ 个人高，不满足条件。

所以我们设第一排的人数比第二排的人数多 $x$ 人。

若给第一排添加一个人，则 $x+1$。

否则则是 $x-1$。

而且也要保证 $x$ 一直大于等于 $0$。

可以转换为第 $\texttt{I}$ 题。

[ about me ](https://github.com/yyf525)
